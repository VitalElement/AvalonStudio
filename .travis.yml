language: csharp
sudo: required
services:
  - docker
os:
  - linux
mono:
  - latest
solution: AvalonStudio.sln
before_install:
  - cd AvalonStudio 
  - sudo ./dependencies.sh

install:  
script:
  - sudo ./buildmono.sh

  #- if [ "$TRAVIS_BRANCH" == "master" ]; then
    - git clone https://github.com/VitalElement/AvalonBuild.git
    - cd AvalonBuild
    - git rm -rf .
    - git clean -fxd
    - cp ../AvalonStudio/AvalonStudioBuild/bin/x86/Release/*.* ./
    - git add .
    - git commit -m 'new CI revision.'
    - git push
    - docker build -t --no-cache AvalonStudio/AvalonStudioBuild .
   # fi

after_success:
  #- if [ "$TRAVIS_BRANCH" == "master" ]; then
  #  docker login -e="$DOCKER_EMAIL" -u="$DOCKER_USERNAME" -p="$DOCKER_PASSWORD";
  #  docker push USER/REPO;
  #  fi
notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/abf03510b7719b383e2b
    on_success: change  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: never     # options: [always|never|change] default: never